<% layout('layouts/main') %>

<form
    method="POST"
    action="/admin/users/manual-bulk"
    id="bulkForm"
    class="h-full"
>
    <div class="flex flex-col h-full px-4">
        <h1 class="text-2xl font-bold text-center"><%= title %></h1>
        <div class="flex flex-col md:flex-row mt-4 max-h-[72px] overflow-y-auto">
            <div class="flex-1">
                <% if (errors) { errors.forEach(e => { %>
                    <p class="text-red-500 text-left">
                        <%- e %>
                    </p>
                <% }) } %> 
            </div>
            <div class="flex-1">
                <% if (success) { success.forEach(s => { %>
                    <p class="text-green-500 text-center">
                        <%= s %>
                    </p>
                <% }) } %>
            </div>
        </div>
        <div
            class="bg-white border flex-1 my-6 overflow-y-scroll w-full mx-auto pb-8 relative rounded-xl shadow-lg"
        >
            <table
                class="w-full table-auto border-collapse mb-6 absolute top-0"
                id="userTable"
            >
                <thead>
                    <tr class="border bg-gray-100 text-left">
                        <th class="p-2">Username</th>
                        <th class="p-2">Email</th>
                        <th class="p-2">Password</th>
                        <th class="p-2">Role</th>
                        <th class="p-2">Agency</th>
                        <th class="p-2">Xo√°</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border">
                        <td class="p-0 border">
                            <input
                                name="username"
                                required
                                class="p-2 w-full bg-white"
                            />
                        </td>
                        <td class="p-0 border">
                            <input
                                name="email"
                                required
                                class="p-2 w-full bg-white"
                            />
                        </td>
                        <td class="p-0 border">
                            <input
                                name="password"
                                required
                                type="password"
                                class="p-2 w-full bg-white"
                            />
                        </td>
                        <td class="p-0 border">
                            <select name="role" required class="p-2 w-full">
                                <option value="">--Role--</option>
                                <% roles.forEach(r => { %>
                                <option value="<%= r._id %>">
                                    <%= r.name %>
                                </option>
                                <% }) %>
                            </select>
                        </td>
                        <td class="p-0 border">
                            <select name="agency" required class="p-2 w-full">
                                <option value="">--Agency--</option>
                                <% agencies.forEach(a => { %>
                                <option value="<%= a._id %>">
                                    <%= a.name %>
                                </option>
                                <% }) %>
                            </select>
                        </td>
                        <td class="p-0 border">
                            <button
                                type="button"
                                class="deleteRowBtn w-full text-center text-red-500"
                            >
                                üóëÔ∏è
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="flex justify-end">
            <button
                type="button"
                id="addRowBtn"
                class="bg-gray-200 hover:bg-gray-300 px-4 py-2 me-4 rounded-md font-medium"
            >
                + Th√™m d√≤ng
            </button>
            <button
                type="submit"
                class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md font-semibold"
            >
                T·∫°o User
            </button>
        </div>
        <div class="flex justify-end">
            <a
                href="/admin/users"
                class="p-4 text-gray-600 hover:text-red-600 font-medium transition duration-150"
                >H·ªßy</a
            >
        </div>
    </div>
</form>

<script src="/js/manual-bulk.js"></script>
